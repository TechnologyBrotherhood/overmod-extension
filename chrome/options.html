<!doctype html>
<!-- This file is entirely LLM-generated -->
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Overmod Options</title>
    <style>
      :root {
        --border: #e5e7eb;
        --muted: #6b7280;
        --bg: #ffffff;
      }
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 24px; background: var(--bg); }
      main { max-width: 900px; margin: 0 auto; }
      h1 { font-size: 20px; margin: 0 0 16px; }
      h2 { font-size: 14px; margin: 16px 0 8px; font-weight: 700; }
      label { display: block; margin: 8px 0 6px; font-weight: 600; font-size: 13px; }
      input[type=text], select { width: 100%; padding: 8px 10px; border: 1px solid var(--border); border-radius: 6px; font-size: 13px; box-sizing: border-box; }
      button { padding: 8px 12px; border: 1px solid var(--border); background: #f9fafb; border-radius: 6px; cursor: pointer; font-size: 13px; }
      button:hover { background: #f3f4f6; }
      .row { display: flex; gap: 8px; align-items: center; }
      .col { flex: 1; }
      .section { border: 1px solid var(--border); border-radius: 8px; padding: 12px; margin: 16px 0; background: #fff; }
      .section h2 { margin-top: 0; }
      .hint { color: var(--muted); font-size: 12px; margin-top: 6px; }
      ul { list-style: none; padding: 0; margin: 8px 0; }
      li { list-style: none; }
      .btn-group { display: flex; gap: 8px; }
      .muted { color: var(--muted); font-size: 12px; }
      .small { font-size: 12px; }
      .gap { height: 8px; }
      /* Writable list cards */
      .wl-list { display: grid; grid-template-columns: 1fr; gap: 10px; }
      .wl-card { border: 1px solid var(--border); border-radius: 8px; padding: 10px 12px; background: #fff; }
      .wl-header { display:flex; align-items:center; justify-content: space-between; margin-bottom: 6px; }
      .wl-title { font-weight: 700; }
      .wl-badge { font-size: 11px; padding: 2px 6px; border-radius: 999px; border: 1px solid var(--border); color: #374151; background: #f3f4f6; }
      .wl-badge-block { background: #fff7ed; color: #9a3412; border-color: #fed7aa; }
      .wl-badge-highlight { background: #fef9c3; color: #854d0e; border-color: #fde68a; }
      .wl-meta { color: var(--muted); font-size: 12px; margin-bottom: 8px; }
      .wl-actions { display:flex; gap: 8px; align-items:center; flex-wrap: wrap; }
      .wl-actions .btn-group { gap: 6px; }
      .list-label { flex: 1; }
      .icon-btn { padding: 4px 6px; line-height: 1; }
      .copyable { cursor: pointer; text-decoration: underline dotted; }
      /* Subscribed list items */
      .sub-list { display: grid; grid-template-columns: 1fr; gap: 8px; }
      .sub-card { display:flex; align-items:center; justify-content: space-between; border: 1px solid var(--border); border-radius: 8px; padding: 8px 12px; background:#fff; }
      .sub-left { display:flex; align-items:center; gap:8px; }
      .sub-name { font-weight: 600; }
      .sub-pk { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 12px; }
      .sub-actions { display:flex; align-items:center; gap:8px; }
      .sub-actions button { white-space: nowrap; }
      .drag-handle { cursor: grab; user-select: none; font-size: 16px; padding: 2px 6px; }
      .sub-card.drag-over { outline: 2px dashed #d1d5db; }
      .sub-flag { width: 18px; height: 18px; display:inline-flex; align-items:center; justify-content:center; border-radius: 50%; border:1px solid var(--border); font-size: 12px; }
      .sub-flag.readonly { background:#f3f4f6; color:#374151; }
      .sub-flag.writable { background:#dcfce7; color:#166534; border-color:#86efac; }
      .sub-flag.transient { box-shadow: 0 0 0 2px #7dd3fc; }
      .color-control { gap: 8px; }
      .color-control-compact { display: inline-flex; align-items: center; flex-wrap: wrap; }
      .color-control-full { display: flex; flex-direction: column; }
      .color-control input[type=color] { width: 42px; height: 32px; padding: 0; border: 1px solid var(--border); border-radius: 6px; background: #fff; }
      .color-control button { padding: 4px 8px; }
      .color-palette { display: flex; gap: 8px; flex-wrap: wrap; }
      .color-palette .swatch { min-width: 68px; border-radius: 6px; border: 1px solid var(--border); font-weight: 600; }
      .color-palette .swatch.active { box-shadow: 0 0 0 2px #d1d5db inset; }
      .color-fields { display: flex; gap: 12px; flex-wrap: wrap; }
      .color-field { display: flex; flex-direction: column; gap: 6px; min-width: 180px; }
      .color-field input[type=text] { width: 100%; padding: 8px 10px; border: 1px solid var(--border); border-radius: 6px; font-size: 13px; box-sizing: border-box; }
      .color-mini { display: inline-flex; align-items: center; gap: 6px; }
      details.color-details summary { cursor: pointer; font-size: 13px; color: #374151; padding: 4px 0; }
      details.color-details { border: none; padding: 0; margin-top: 10px; }
      details.color-details .color-control { margin-top: 8px; }
      /* Local users (blocked / highlighted) */
      .user-pill-list { display:flex; flex-wrap:wrap; gap:6px; margin-top:8px; }
      .user-pill { display:inline-flex; align-items:center; gap:6px; padding:2px 8px; border-radius:999px; border:1px solid var(--border); background:#f9fafb; }
      .user-pill button { padding:2px 6px; font-size:11px; }
      /* Modal */
      .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.35); display: flex; align-items: center; justify-content: center; z-index: 9999; }
      .modal-overlay.hidden { display: none; }
      .modal { width: 460px; max-width: 90vw; background: #fff; border-radius: 10px; border: 1px solid var(--border); box-shadow: 0 10px 30px rgba(0,0,0,0.15); }
      .modal-header { display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; border-bottom: 1px solid var(--border); }
      .modal-header h3 { margin: 0; font-size: 16px; }
      .modal-header button { border: none; background: transparent; font-size: 16px; cursor: pointer; }
      .modal-body { padding: 16px; }
      .modal-body .row { margin: 8px 0; }
      .modal-body textarea { width: 100%; box-sizing: border-box; min-height: 96px; padding: 8px 10px; border: 1px solid var(--border); border-radius: 6px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 12px; resize: vertical; }
      .modal-body input[type=text], .modal-body select { width: 100%; box-sizing: border-box; max-width: 100%; }
      .modal-body .input-with-icon { position: relative; }
      .modal-body .input-with-icon input[type=text] { padding-right: 64px; }
      .modal-body .input-with-icon .inline-reload {
        position: absolute;
        right: 8px;
        top: 50%;
        transform: translateY(-50%);
        border: none;
        background: transparent;
        padding: 0 4px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 12px;
        color: var(--muted);
      }
      .modal-body .input-with-icon .inline-reload:hover { background: transparent; text-decoration: underline; }
      .modal-body .input-with-icon .inline-reload:disabled { opacity: 0.5; cursor: default; }
      .modal-footer { padding: 12px 16px; border-top: 1px solid var(--border); display: flex; gap: 8px; justify-content: flex-end; }
      .modal-footer button { min-width: 80px; }
      .agg-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
      #aggBlocked, #aggHighlighted { max-height: 240px; overflow: auto; border: 1px solid var(--border); border-radius: 6px; padding: 8px 10px; }
      #aggBlocked li, #aggHighlighted li { padding: 2px 0; border-bottom: 1px dashed var(--border); }
      #aggBlocked li:last-child, #aggHighlighted li:last-child { border-bottom: none; }
      /* Collapsible advanced section */
      details.advanced { margin-top: 24px; }
      details.advanced summary { cursor: pointer; font-size: 13px; color: var(--muted); padding: 8px 0; }
      details.advanced summary:hover { color: #374151; }
      details.advanced .section { margin-top: 8px; }
    </style>
  </head>
  <body>
    <main>
    <h1>Overmod Settings</h1>

    <section class="section">
      <h2>Subscribed Lists</h2>
      <div class="row" style="justify-content: space-between;">
        <div class="muted">Subscribe to lists and choose how to use them</div>
        <div class="btn-group">
          <button id="openNewBtn">New List…</button>
          <button id="openSubBtn">Subscribe to List…</button>
        </div>
      </div>
      <ul id="lists" class="sub-list"></ul>
    </section>

    <section class="section">
      <h2>Unsubscribed Writable Lists</h2>
      <div class="muted small">
        Lists you own (with private keys) but are not currently subscribed to. You can keep them here or remove them permanently.
      </div>
      <ul id="unsubscribedLists" class="wl-list"></ul>
    </section>



    <section class="section">
      <h2>Local Blocked Users</h2>
      <label for="userInput">Username</label>
      <div class="row">
        <input class="col" type="text" id="userInput" placeholder="HN username" />
        <button id="addUserBtn">Add</button>
      </div>
      <ul id="users" class="user-pill-list"></ul>
      <div class="hint">Local blocks are merged with subscribed lists and applied immediately.</div>
    </section>

    <section class="section">
      <h2>Highlighted Users</h2>
      <label for="hUserInput">Username</label>
      <div class="row">
        <input class="col" type="text" id="hUserInput" placeholder="HN username" />
        <button id="addHUserBtn">Add</button>
      </div>
      <ul id="hUsers" class="user-pill-list"></ul>
      <div class="hint">Comments by highlighted users are visually emphasized on HN.</div>
    </section>

    <section class="section">
      <h2>Behavior</h2>
      <label for="hideMode">Hide Mode</label>
      <select id="hideMode">
        <option value="remove">Remove threads</option>
        <option value="collapse" disabled>Collapse threads (coming soon)</option>
      </select>
    </section>

    <section class="section">
      <h2>Pull from Server</h2>
      <div class="row">
        <button id="syncBtn">Pull Latest</button>
        <div id="syncStatus" class="muted"></div>
      </div>
      <div class="gap"></div>
      <div class="small">Combined blocked users: <span id="combinedCount">0</span></div>
      <div class="gap"></div>
      <div class="agg-grid">
        <div>
          <div class="muted">Blocked (<span id="aggBlockedCount">0</span>)</div>
          <ul id="aggBlocked"></ul>
        </div>
        <div>
          <div class="muted">Highlighted (<span id="aggHighlightedCount">0</span>)</div>
          <ul id="aggHighlighted"></ul>
        </div>
      </div>
    </section>

    <details class="advanced">
      <summary>Use Custom Server</summary>
      <section class="section">
        <label for="apiBaseUrl">API Base URL</label>
        <input type="text" id="apiBaseUrl" placeholder="https://api.overmod.org" />
        <div class="hint">Lists will be fetched from this server instead of the default.</div>
      </section>
    </details>

    <section class="section">
      <h2>Export / Import</h2>
      <div class="muted small" style="margin-bottom: 12px;">
        Export your settings (lists, keys, colours, local users) to a JSON file, or import from a previous export.
      </div>
      <div class="btn-group">
        <button id="exportBtn">Export Settings</button>
        <button id="importBtn">Import Settings…</button>
      </div>
    </section>
    </main>

    <!-- Modal root -->
    <div id="modalRoot" class="modal-overlay hidden">
      <div class="modal">
        <div class="modal-header">
          <h3 id="modalTitle"></h3>
          <button id="modalClose" aria-label="Close">✕</button>
        </div>
        <div id="modalBody" class="modal-body"></div>
        <div class="modal-footer">
          <button id="modalCancel">Cancel</button>
          <button id="modalPrimary">OK</button>
        </div>
      </div>
    </div>

    <script src="common.js"></script>
    <script src="export-import.js"></script>
    <script src="options.js"></script>
  </body>
  </html>
